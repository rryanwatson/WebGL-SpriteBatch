<!DOCTYPE html>
<html lang="en">

<head>
    <title>Sprite's</title>
    <meta charset="UTF-8">
</head>

<body>
    <canvas id="myCanvas" width="300" height="300"></canvas>
    
    <script>

        
        function loaded() {


            var myCanvas = document.getElementById('myCanvas');
            var gl = myCanvas.getContext('webgl', {alpha:false});
            

            if(gl) {
                //var spriteBatch = new SpriteBatch(gl);
                SpriteBatch.init(gl);

                var axe1 = {url:'Sprites/axe.png', destination: new Vector(20,0), depth: 2},
                    axe2 = {url:'Sprites/axe2.png', destination: new Vector(30,45), depth: 1},
                    axe3 = {url:'Sprites/upg_axe.png', destination: new Vector(40,140), depth: 5};

                SpriteBatch.loadSprites( [axe1,axe2,axe3], function() { apploop(); });

                gl.clearColor(0.0,0.0,0.0,1.0);
                gl.enable(gl.DEPTH_TEST);
                gl.depthFunc(gl.LEQUAL);

            } else {
                //context not supported
            }

            function apploop() {
                window.requestAnimationFrame(apploop);
                gl.clear(gl.COLOR_BUFFER_BIT);

                //draw sprites
                //SpriteBatch.begin(SpriteSortMode.BackToFront,gl.FUNC_ADD);
                //SpriteBatch.begin(SpriteSortMode.FrontToBack,gl.FUNC_ADD);
                SpriteBatch.begin(SpriteSortMode.Deferred,gl.FUNC_ADD)
                SpriteBatch.draw(axe1);
                SpriteBatch.draw(axe2);
                SpriteBatch.draw(axe3);
                SpriteBatch.end();
            } 
        }
        
        

    </script>
    
    <script src="v.js"></script>
    <script src="m.js"></script>
    <script src="s.js" onload="loaded()"></script> 
    <!-- <script src="uglify.js" onload="loaded()"></script> -->
</body>

</html>